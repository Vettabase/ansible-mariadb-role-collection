---
# tasks file for chrony

- name: Validate if the ntp_servers is not none
  tags: [chrony, chrony-validate]
  assert:
    that: ntp_servers is not none and ( ntp_servers | length > 0)
    fail_msg: "ntp_servers is not set or empty"
    success_msg: "ntp_servers is defined and not empty"

- name: Load the Debian specific defaults
  include_tasks: debian.yml
  when: ansible_pkg_mgr == 'apt'

- name: Load the RedHat specific defaults
  include_tasks: redhat.yml
  when: ansible_pkg_mgr == 'yum'

- include_tasks: install.yml
- include_tasks: configure.yml
